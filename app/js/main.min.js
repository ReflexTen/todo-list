"use strict";const addForm=document.querySelector(".todolist__form"),addInput=document.querySelector(".todolist__input"),sumItem=document.querySelector(".footer__num span"),toDoList=document.querySelector(".list"),delCompleted=document.querySelector("#delete-completed"),showActive=document.querySelector("#show-active"),showAll=document.querySelector("#show-all"),showCompleted=document.querySelector("#show-completed");let counter=0,numTask=0;function quantityChange(e){"add"===e?++counter:"delete"===e&&(--counter,--numTask),sumItem.innerHTML=""+counter}function creatElement(e,t,l,o){let c=document.createElement("li");c.classList.add("list__item"),c.innerHTML=`
    <input class="list__checkbox" type="checkbox" name="item-checkbox${e}" id="item-checkbox${e}" ${o}>
    <label class="list__label ${l}" for="item-checkbox${e}">${t}</label>
      <div class="list__basket">
         <span class="sr-only">Cash</span>
      </div>
  `,toDoList.append(c),quantityChange("add")}function newToDo(e){creatElement(++numTask,e,"not-completed","");e={id:numTask,value:e,checked:!1};localStorage.setItem("task-"+numTask,JSON.stringify(e))}addForm.addEventListener("submit",e=>{e.preventDefault();let t=addInput.value;t&&50<t.length&&(t=t.substring(0,22)+"..."),e.target.reset(),newToDo(t)});let listChange=l=>e=>{document.querySelectorAll(".active").forEach(e=>{e.classList.remove("active")}),e.target.classList.add("active"),document.querySelectorAll(".list__label").forEach(e=>{let t=e.closest(".list__item");e.classList.contains(l)?t.classList.remove("hide"):t.classList.add("hide")})};function addTaskFromLocalStorage(){let t=0;for(let e=0;e<localStorage.length;e++){var l=Number(localStorage.key(e).slice(5));t<l&&(t=l)}for(let c=1;c<=t;c++)if(localStorage.getItem("task-"+c)){let e=localStorage.getItem("task-"+c),t=JSON.parse(e),l,o;o=1==t.checked?(l="completed","checked"):(l="not-completed",""),numTask++,creatElement(t.id,t.value,l,o)}}toDoList.addEventListener("click",l=>{let o=l.target;if(o.classList.contains("list__basket")){let e=o.closest(".list__item");e.remove(),quantityChange("delete");l=o.previousElementSibling.getAttribute("for").slice(13);localStorage.removeItem("task-"+l)}else if(o.classList.contains("list__label")){o.classList.toggle("completed"),o.classList.toggle("not-completed");l=o.getAttribute("for").slice(13);let e=localStorage.getItem("task-"+l),t=JSON.parse(e);1==t.checked?t.checked=!1:t.checked=!0,localStorage.setItem("task-"+l,JSON.stringify(t))}}),delCompleted.addEventListener("click",()=>{document.querySelectorAll(".completed").forEach(e=>{let t=e.closest(".list__item");t.remove(),quantityChange("delete");e=e.getAttribute("for").slice(13);localStorage.removeItem("task-"+e)})}),showActive.addEventListener("click",listChange("not-completed")),showCompleted.addEventListener("click",listChange("completed")),showAll.addEventListener("click",()=>{document.querySelectorAll(".list__label").forEach(e=>{let t=e.closest(".list__item");t.classList.remove("hide")}),document.querySelectorAll(".active").forEach(e=>{e.classList.remove("active")})}),addTaskFromLocalStorage();